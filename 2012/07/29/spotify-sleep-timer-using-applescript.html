<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Addam Hardy [Spotify Sleep Timer Using AppleScript]</title>
    <meta name="description" content="">
    <meta name="author" content="Addam Hardy">

    <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet" type="text/css" media="all">
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">addamhardy.com</a>
          <ul class="nav">
						<li id="blog">
							<a href="/blog">Blog</a>
						</li>
            <li id="pgp">
              <a href="/pgp">PGP</a>
            </li>
            <li id="euler">
              <a href="/project-euler-solutions">Project Euler</a>
            </li>
            <li id="projects">
              <a href="/projects">Projects</a>
            </li>
            <li id="about">
              <a href="/about">About Me</a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Spotify Sleep Timer Using AppleScript</h1>
    <p class="post-meta">Jul 29, 2012</p>
  </header>

  <article class="post-content">
    Like most of the technology addicted masses, I sleep with my Macbook Pro either on, near or around my bed. I can quickly check emails or IMs that come in or just generally waste my life away and prevent myself from going to sleep, but I can't help it. That's why it's called an addiction. It also allows me to take advantage of some apps while sleeping.<!--more-->
Like alarm clocks or listening to music while going to sleep. I have a great Rachmaninov playlist on Spotify that I often listen to while going to sleep, but Spotify plays on forever unless you stop it and going to sleep with music is fine but having music drone on for hours and hours in my sleep isn't what I want.
<br /><br />
&nbsp;&nbsp;&nbsp;So there I lay in bed wishing Spotify had a sleep timer. Alas it did not. But! I do have a tiny bit of ingenuity and know-how so I decided to take matters into my own hands. Apple provides a platform for developers to expose functionality of their app programmatically through AppleScript. This allows a very low entry point for anyone to write small scripts to accomplish tasks with the apps they use that those apps may not take care of themselves.
<br/><br />
I wanted a Spotify sleep timer. So I made a Spotify sleep timer.
<br />
<script src="https://gist.github.com/3180350.js?file=spotifySleep.scpt"></script>
&nbsp;&nbsp;&nbsp;5 minutes later I had a perfectly functional sleep timer for Spotify on Mac. It's an incredibly simple script that just asks the user how many minutes would they like Spotify to play until the script tells Spotify to stop. You could modify this script to go by hours if you want. I'll leave that up to you to figure out. The script can be run through the Services menu in the Spotify toolbar.
<br/><br/>
The steps to install this script are pretty straight forward:
<ul>
  <li>Open Automator</li>
  <li>Create a new "Service" project</li>
  <li>(1) Add the "Run an AppleScript" action to the workflow by finding it in the search bar and then double clicking the result</li>
  <li>(2) Select "no input" from the "Service receives" drop box.
  <li>(3) Select "other" from the application drop box and select Spotify from your applications folder.
  <li>(4) Copy and paste the code above in the box.</li>
  <br/>
  <img src="/assets/images/spotify_timer/automator-walkthrough.png">
  <br/>
  <li>Save as Spotify Sleep</li>
  <br/>
  <img src="/assets/images/spotify_timer/automator.png">
  <br/>
  <li>Restart Spotify</li>
  <li>Click "Spotify" in the toolbar and go down to "Services" and select "sleepSpotify"
  <br />
  <img src="/assets/images/spotify_timer/spotify_services.png">
  <li>Follow prompts</li>
  <img src="/assets/images/spotify_timer/prompt.png">
  <li>Go to sleep listening to music</li>
<br/>
Hope you enjoy this little script! If you use it, leave me a comment on this post and let me know. Thanks! And don't forget, if you want something done that someone else hasn't done yet, DO IT YOURSELF!

  </article>

</div>

      </div>

      <footer>
        <p>&copy; Addam Hardy 2012-2015
        </p>
      </footer>

    </div> <!-- /container -->


  </body>
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-30687512-1']);
	  _gaq.push(['_setDomainName', 'addamhardy.com']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
</html>

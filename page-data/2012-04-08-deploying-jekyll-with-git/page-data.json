{"componentChunkName":"component---gatsby-theme-code-notes-src-templates-note-js","path":"/2012-04-08-deploying-jekyll-with-git","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"emoji\": \"‚úèÔ∏è\",\n  \"title\": \"Deploying Jekyll With Git\",\n  \"tags\": [\"jekyll\", \"git\"],\n  \"comments\": true,\n  \"modified\": \"2012-04-08T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"My very first tech blog on my own personal site! We'll see what comes of this. I have a bit of a problem on focusing on things and sticking to it, but I'm going to do my best to keep a semi-sort-of-regular-kind-of-occasional routine of tech blogs going.\"), mdx(\"hr\", null), mdx(\"p\", null, \"It wasn't so long ago that I started using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://capify.com\"\n  }), \"Capistrano\"), \" for deployments and that it was a gift directly from the spaghetti monster himself. Now after using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://heroku.com\"\n  }), \"Heroku\"), \" for a year or so, I am even more spoiled. Spoiled by git deployments. Commit and push and then deployment is done. Like magic. A few weeks ago I decided to make this site for my work and to start doing some occasional tech blogging. I went through a few different possibilities for what to use but decided on Jekyll. A lot of people use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://jekyllrb.com\"\n  }), \"Jekyll\"), \" and deploy to Github pages on their Github account. I already had an idle \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://linode.com\"\n  }), \"Linode\"), \" sitting around and I wanted to use that. So I came to a decision: use Jekyll and a automated git deployment workflow on my own server. That lead me to Jekyll and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://github.com/sitaramc/gitolite\"\n  }), \"Gitolite\"), \". Jekyll is essentially a parser or a static site generator -- not really a blog engine. It parses through files and generates all the flat html files needed for a site. So instead of managing a database and everything, you can just write your blog posts in markdown. It's a really brilliant set up and is easy as hell. Since it is all flat files, it is also really convenient to keep your blog on Github so that it is always backed up.\"), mdx(\"p\", null, \"Using Gitolite and Jekyll you can be auto-deploying within minutes.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Gitolite Installation\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Create a user named 'git' and login with this user\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ adduser git\\n$ su - git\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Copy your ssh pubkey from the workstation you wish to deploy from and put it in the home directory for the git user. Rename the key to your_name.pub. (Of course using your name... not \\\"your_name\\\")\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ gl-setup /home/git/your_name.pub\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Run these commands\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ git clone git://github.com/sitaramc/gitolite\\n$ gitolite/src/gl-system-install\\n$ gl-setup -q ~/your_name.pub\\n\")), mdx(\"p\", null, \"That will complete the install. If you have problems with it though, there is a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://sitaramc.github.com/gitolite/install.html#insttrouble\"\n  }), \"more extensive installation\"), \" guide to solve problems.\"), mdx(\"p\", null, \"You do \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"not\"), \" install repositories directly on the server. You clone the gitolite-admin repository on the workstation that you will deploy from in order to administer the gitolite installation. You can manage users, groups and repository access from this repository.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ git clone git@my-server:gitolite-admin\\n\")), mdx(\"p\", null, \"After you have cloned the admin respository, edit gitolite-admin/conf/gitolite.conf to add in your new repository and user permissions.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"repo blog\\nRW+ = username\\n\")), mdx(\"p\", null, \"In this example, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"blog\"), \" is the name of the repository you want to create and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"username\"), \" is the name you put on the public key you uploaded. So if you uploaded a key named addam.pub you will need to put \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"addam\"), \" here.\"), mdx(\"p\", null, \"Add the new files to the git repository \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"(git add .)\"), \" and commit. Push it back to the remote repository (the server you are deploying to) with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"git push origin master\"), \".\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Managing a Jekyll-Bootstrap Blog\")), mdx(\"p\", null, \"I really liked how Jekyll-Bootstrap has a lot of things good to go instead of me building it all by myself so I decided to go with Jekyll-Bootstrap. After you clone Jekyll-Bootstrap and modify a few config files, you will have a no-database Jekyll blog running straight-away.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ git clone https://github.com/plusjade/jekyll-bootstrap.git name_of_blog\\n$ cd name_of_blog\\n$ git remote set-url origin git@my-server:blog\\n\")), mdx(\"p\", null, \"In this example: \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"my-server\"), \" is the hostname of the server you set up Gitolite on and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"blog\"), \" is whatever you named your repository in the Gitolite config file.\"), mdx(\"p\", null, \"You can modify files and test them in real time by running \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"jekyll --server\"), \" inside the blog directory. This will run a WEBrick instance so that you'll be able to access your blog from http://localhost:4000. You can leave this running while you edit your files and it will regenerate the files as you edit them.\"), mdx(\"p\", null, \"I personally use Nginx to host my Jekyll site on my server but you can use any web server. Just point it to the directory you want it to be served from and then you can create an auto-update script that will run upon each push. So when you push your new blog that you have tested locally to your server, the post-receive hook will fire and update your blog. Completely automated deployment courtesy of Git, Gitolite and Jekyll.\"), mdx(\"p\", null, \"On the your deployment server navigate to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"/home/git/repositories/blog.git/hooks\"), \" and edit the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"post-receive\"), \" file. Paste this inside the file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"GIT_REPO=$HOME/repositories/blog.git\\nTMP_GIT_CLONE=$HOME/tmp/blog\\nPUBLIC_WWW=/var/www/blog\\n\\ngit clone $GIT_REPO $TMP_GIT_CLONE\\ncd $TMP_GIT_CLONE && jekyll --no-auto $TMP_GIT_CLONE $PUBLIC_WWW\\ncd ~ && rm -rf $TMP_GIT_CLONE\\n\\nfind $PUBLIC_WWW -type f -print0 | xargs -0 chmod 666\\nfind $PUBLIC_WWW -type d -print0 | xargs -0 chmod 777\\n\\nexit\\n\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Ensure that you set PUBLIC_WWW to wherever you have your web server pointing\")), mdx(\"p\", null, \"After you save this file, commit a small change to test it. Upon pushing, the server should fire the post-receive hook and regenerate your site. This is an example of what a successful push should look like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"addam@Hera:~/blog  (master): $> git push origin\\nCounting objects: 17, done.\\nDelta compression using up to 2 threads.\\nCompressing objects: 100% (8/8), done.\\nWriting objects: 100% (9/9), 3.02 KiB, done.\\nTotal 9 (delta 3), reused 0 (delta 0)\\nremote: Cloning into /home/git/tmp/blog...\\nremote: done.\\nremote: Configuration from /home/git/tmp/blog/_config.yml\\nremote: Building site: /home/git/tmp/blog -> /srv/www/addamhardy.com\\nremote: Successfully generated site: /home/git/tmp/blog -> /srv/www/addamhardy.com\\nTo git@addamhardy.com:blog\\n   be9793b..9d6b73f  master -> master\\naddam@Hera:~/blog  (master): $>\\n\")), mdx(\"p\", null, \"And there you go. git auto-deloy awesomeness. In order to create a blog post you just do:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"rake post title=\\\"Hello World\\\"\\n\")), mdx(\"p\", null, \"and then edit the file in markdown or html. Jekyll is a create platform for creating a static website. Execute the command \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"rake -T\"), \" to see all the possible rake tasks.\"), mdx(\"p\", null, \"The benefit of using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://jekyllbootstrap.com/usage/jekyll-quick-start.html\"\n  }), \"Jekyll-Bootstrap\"), \" is having a lot of things baked in and ready to go like themes. This simple setup is much easier than me setting up and maintaining a wordpress blog and database, and it enables you to create a basic, simple and clean static website and/or blog.\"), mdx(\"p\", null, \"Looking forward to doing more blog posts using this system.\"), mdx(\"hr\", null), mdx(\"p\", null, \"Still getting the hang of technical writing/blogging. So bear with me as I learn the ropes! Hope this post helped you set up an easy Jekyll deployment system.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Deploying Jekyll With Git","tags":["jekyll","git"],"emoji":"‚úèÔ∏è","modified":"April 8, 2012","modifiedTimestamp":"2012-04-08T00:00:00.000Z"},"references":[],"fields":{"slug":"/2012-04-08-deploying-jekyll-with-git"},"tableOfContents":{},"parent":{"relativePath":"2012-04-08-deploying-jekyll-with-git.md"}}},"pageContext":{"id":"d9b85ed5-c85e-5d33-a744-72a4ca942c46","previous":{"id":"66fc43d9-01ab-51f7-a698-b04daf438c61","frontmatter":{"title":"I finally rewrote my resume. In LaTeX.","tags":["LaTeX","resume"]},"fields":{"slug":"/2012-08-28-i-finally-rewrote-my-resume-in-latex"}},"next":{"id":"5537b84c-fe38-569b-a8ee-d6ae8ed546a9","frontmatter":{"title":"[Talk] Objective-C For Web Developers","tags":["talks","iOS","webdev"]},"fields":{"slug":"/2012-08-28-talk-objective-c-for-web-developers"}},"hasUntagged":false,"basePath":"/","tags":[{"tag":"CI","totalCount":1,"slug":"/ci","path":"/tag/ci"},{"tag":"LaTeX","totalCount":1,"slug":"/la-te-x","path":"/tag/la-te-x"},{"tag":"applescript","totalCount":2,"slug":"/applescript","path":"/tag/applescript"},{"tag":"dev culture","totalCount":1,"slug":"/dev-culture","path":"/tag/dev-culture"},{"tag":"facebook","totalCount":1,"slug":"/facebook","path":"/tag/facebook"},{"tag":"git","totalCount":2,"slug":"/git","path":"/tag/git"},{"tag":"iOS","totalCount":3,"slug":"/i-os","path":"/tag/i-os"},{"tag":"interview","totalCount":2,"slug":"/interview","path":"/tag/interview"},{"tag":"jekyll","totalCount":1,"slug":"/jekyll","path":"/tag/jekyll"},{"tag":"lessons-learned","totalCount":1,"slug":"/lessons-learned","path":"/tag/lessons-learned"},{"tag":"networking","totalCount":1,"slug":"/networking","path":"/tag/networking"},{"tag":"objective-c","totalCount":1,"slug":"/objective-c","path":"/tag/objective-c"},{"tag":"osx","totalCount":1,"slug":"/osx","path":"/tag/osx"},{"tag":"process","totalCount":1,"slug":"/process","path":"/tag/process"},{"tag":"protips","totalCount":1,"slug":"/protips","path":"/tag/protips"},{"tag":"resume","totalCount":1,"slug":"/resume","path":"/tag/resume"},{"tag":"safari","totalCount":1,"slug":"/safari","path":"/tag/safari"},{"tag":"security","totalCount":1,"slug":"/security","path":"/tag/security"},{"tag":"spotify","totalCount":1,"slug":"/spotify","path":"/tag/spotify"},{"tag":"talks","totalCount":2,"slug":"/talks","path":"/tag/talks"},{"tag":"travis ci","totalCount":1,"slug":"/travis-ci","path":"/tag/travis-ci"},{"tag":"webdev","totalCount":1,"slug":"/webdev","path":"/tag/webdev"}],"pages":[{"id":"0a535571-7f8c-57da-a35f-34174c35d837","frontmatter":{"title":"PGP","tags":null,"emoji":"üîê"},"fields":{"slug":"/pgp"},"slug":"/pgp","path":"/pgp"},{"id":"f714b3b8-9df1-505b-afdd-99672e68133d","frontmatter":{"title":"me","tags":null,"emoji":"üßî‚Äç‚ôÇÔ∏è"},"fields":{"slug":"/me"},"slug":"/me","path":"/me"}]}},"staticQueryHashes":["1308211557","2744905544","467212769"]}